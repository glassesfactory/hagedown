// Generated by CoffeeScript 1.3.3
var sendAjax;

$(document).ready(function() {
  var $success, h;
  $('a').live('click', function(event) {
    var method, self, token, url;
    self = $(this);
    method = self.attr('data-method');
    if (!(method != null)) {
      return;
    } else {
      event.preventDefault();
    }
    url = self.attr('href');
    token = $('meta[name=_csrf_token]').attr('content');
    return sendAjax(url, method, token);
  });
  $('form').on('submit', function(event) {
    var method, self, url;
    self = $(this);
    method = self.attr('method');
    if (method !== 'PUT' && method !== 'put') {
      return;
    }
    event.preventDefault();
    url = self.attr('action');
    return sendAjax(url, method, null, self.serializeArray());
  });
  $success = $('.success');
  if ($success != null) {
    h = -$success.height() * 2;
    setTimeout(function() {
      $(window).on('webkitTransitionEnd', function(event) {
        return $('.alertArea').empty();
      });
      return $('.alert.success').css({
        '-webkit-transform': 'translate3d(0,-60px,0)',
        '-webkit-transition': '400ms cubic-bezier(0,0,0.25,1)'
      });
    }, 2000);
    return $success.css({
      '-webkit-transform': 'translate3d(0,0,0)',
      '-webkit-transition': '500ms cubic-bezier(0,0,0.25,1)'
    });
  }
});

sendAjax = function(url, method, token, data) {
  if (!(data != null)) {
    data = [];
  }
  data.push({
    authenticity_token: token
  });
  return $.ajax({
    url: url,
    type: method,
    data: data,
    success: function(data) {
      return window.location.href = data;
    },
    error: function(data) {
      return console.log("faild");
    }
  });
};
